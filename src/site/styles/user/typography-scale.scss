/**
 * Unified Typography System
 * Based on TailwindCSS type scale with rem units
 * Provides consistent font sizing across the entire site
 */

// Base font size (16px = 1rem)
$base-font-size: 16px;

// TailwindCSS-inspired type scale
$font-sizes: (
  'xs': 0.75rem,    // 12px
  'sm': 0.875rem,   // 14px
  'base': 1rem,     // 16px
  'lg': 1.125rem,   // 18px
  'xl': 1.25rem,    // 20px
  '2xl': 1.5rem,    // 24px
  '3xl': 1.875rem,  // 30px
  '4xl': 2.25rem,   // 36px
  '5xl': 3rem,      // 48px
  '6xl': 3.75rem,   // 60px
  '7xl': 4.5rem,    // 72px
  '8xl': 6rem,      // 96px
  '9xl': 8rem       // 128px
);

// Semantic font size mappings
$semantic-sizes: (
  'smallest': map-get($font-sizes, 'xs'),
  'smaller': map-get($font-sizes, 'sm'),
  'small': map-get($font-sizes, 'sm'),
  'base': map-get($font-sizes, 'base'),
  'medium': map-get($font-sizes, 'lg'),
  'large': map-get($font-sizes, 'xl'),
  'larger': map-get($font-sizes, '2xl'),
  'largest': map-get($font-sizes, '3xl')
);

// Heading sizes (following a more conservative scale)
$heading-sizes: (
  'h1': map-get($font-sizes, '4xl'),  // 36px
  'h2': map-get($font-sizes, '3xl'),  // 30px
  'h3': map-get($font-sizes, '2xl'),  // 24px
  'h4': map-get($font-sizes, 'xl'),   // 20px
  'h5': map-get($font-sizes, 'lg'),   // 18px
  'h6': map-get($font-sizes, 'base')  // 16px
);

// UI element sizes
$ui-sizes: (
  'ui-smallest': map-get($font-sizes, 'xs'),
  'ui-smaller': map-get($font-sizes, 'sm'),
  'ui-small': map-get($font-sizes, 'sm'),
  'ui-medium': map-get($font-sizes, 'base'),
  'ui-large': map-get($font-sizes, 'lg')
);

// Function to get font size
@function font-size($size) {
  @if map-has-key($font-sizes, $size) {
    @return map-get($font-sizes, $size);
  } @else if map-has-key($semantic-sizes, $size) {
    @return map-get($semantic-sizes, $size);
  } @else if map-has-key($heading-sizes, $size) {
    @return map-get($heading-sizes, $size);
  } @else if map-has-key($ui-sizes, $size) {
    @return map-get($ui-sizes, $size);
  } @else {
    @warn "Font size '#{$size}' not found in type scale";
    @return 1rem;
  }
}

// Mixin for consistent font sizing
@mixin text-size($size, $line-height: 1.5) {
  font-size: font-size($size);
  line-height: $line-height;
}

// CSS Custom Properties for theme compatibility
:root {
  // Base font size
  --font-text-size: #{font-size('base')};
  
  // Heading sizes
  --h1-size: #{font-size('h1')};
  --h2-size: #{font-size('h2')};
  --h3-size: #{font-size('h3')};
  --h4-size: #{font-size('h4')};
  --h5-size: #{font-size('h5')};
  --h6-size: #{font-size('h6')};
  
  // UI sizes
  --font-ui-smaller: #{font-size('ui-smaller')};
  --font-ui-small: #{font-size('ui-small')};
  --font-ui-medium: #{font-size('ui-medium')};
  --font-ui-large: #{font-size('ui-large')};
  
  // Semantic sizes
  --font-smaller: #{font-size('smaller')};
  --font-smallest: #{font-size('smallest')};
  
  // Legacy compatibility
  --font-small: #{font-size('small')};
  --font-large: #{font-size('large')};
  --font-larger: #{font-size('larger')};
  --font-largest: #{font-size('largest')};
}

// Typography utility classes
.text-xs { @include text-size('xs'); }
.text-sm { @include text-size('sm'); }
.text-base { @include text-size('base'); }
.text-lg { @include text-size('lg'); }
.text-xl { @include text-size('xl'); }
.text-2xl { @include text-size('2xl'); }
.text-3xl { @include text-size('3xl'); }
.text-4xl { @include text-size('4xl'); }
.text-5xl { @include text-size('5xl'); }
.text-6xl { @include text-size('6xl'); }
.text-7xl { @include text-size('7xl'); }
.text-8xl { @include text-size('8xl'); }
.text-9xl { @include text-size('9xl'); }

// Heading styles
h1 { @include text-size('h1', 1.2); }
h2 { @include text-size('h2', 1.3); }
h3 { @include text-size('h3', 1.4); }
h4 { @include text-size('h4', 1.4); }
h5 { @include text-size('h5', 1.5); }
h6 { @include text-size('h6', 1.5); }

// Body text
body, p {
  @include text-size('base');
}

// Small text elements
small, .small {
  @include text-size('sm');
}

// Large text elements
.large {
  @include text-size('lg');
}

// Code elements
code, pre {
  @include text-size('sm', 1.4);
}

// Button text
button {
  @include text-size('base');
}

// Input text
input, textarea, select {
  @include text-size('base');
}

// Table text
table {
  @include text-size('sm');
}

th {
  @include text-size('sm', 1.3);
  font-weight: 600;
}

// Navigation elements
nav, .nav {
  @include text-size('sm');
}

// Sidebar elements
.sidebar {
  @include text-size('sm');
}

// Search elements
.search-box input {
  @include text-size('2xl');
}

// Callout elements
.callout {
  @include text-size('base');
}

.callout-title {
  @include text-size('lg', 1.3);
}

// Backlink elements
.backlink {
  @include text-size('base');
}

// Graph elements
.graph-title {
  @include text-size('lg');
}

// File tree elements
.filename {
  @include text-size('sm');
}

// Timestamp elements
.timestamps {
  @include text-size('xs');
}

// Responsive typography adjustments
@media (max-width: 768px) {
  h1 { @include text-size('3xl', 1.2); }
  h2 { @include text-size('2xl', 1.3); }
  h3 { @include text-size('xl', 1.4); }
  
  .search-box input {
    @include text-size('xl');
  }
  
  .graph-title {
    @include text-size('base');
  }
}

@media (max-width: 480px) {
  h1 { @include text-size('2xl', 1.2); }
  h2 { @include text-size('xl', 1.3); }
  h3 { @include text-size('lg', 1.4); }
  
  .search-box input {
    @include text-size('lg');
  }
}
